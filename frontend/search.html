<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="resources\css\style_search.css">
     <!-- MapboxJ avaScript API -->
     <script src='https://api.mapbox.com/mapbox-gl-js/v2.7.0/mapbox-gl.js'></script>
     <!-- Mapbox CSS -->
     <link href='https://api.mapbox.com/mapbox-gl-js/v2.7.0/mapbox-gl.css' rel='stylesheet' />
     <!-- MapboxGeocoder -->
     <script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.min.js'></script>
     <link href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.css' rel='stylesheet' />
    
    <!--<script src='js\js_for_search.js'></script>-->
     
</head>
<body>
    <div id="header">
        <div id="brand">
            <span>RideLink</span>
        </div>
    </div>
    <div id="aaa">
        <div id="slogo">
            <span>KO KO DA YO</span>
        </div>
    </div>
    <div class="container">
        <div class="search-box">
            <input type="text" id="search-input" placeholder="search for location">
            <button id="search-button">SEARCH</button>
        </div>
    </div>
    <div class="container1">
        <div id="map-container">
            <div id="map-container" style="width: 75%; height: 600px;"></div>
        </div>
    </div>
    <script>
        mapboxgl.accessToken = 'pk.eyJ1IjoieXV0b25nMDYyOSIsImEiOiJjbG9jM2IwNm0weWxqMmlubjB4b2V2ZWF5In0.DvGhBLaLcFQpyalSaXaYiw'; // api

        var map = new mapboxgl.Map({
            container: 'map-container',
            style: 'mapbox://styles/mapbox/streets-v11', 
            center: [-75, 40], // centre position
            zoom: 9 // zoom level
        });

        document.getElementById('search-button').addEventListener('click', function () {
            var searchTerm = document.getElementById('search-input').value;

            // set search term to api
            fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${searchTerm}.json?access_token=${mapboxgl.accessToken}`)
                .then(response => response.json())
                .then(data => {
                    if (data.features.length > 0) {
                        // get the features from the mapbox
                        var coordinates = data.features[0].center;

                        // add the marker to the map
                        new mapboxgl.Marker().setLngLat(coordinates).addTo(map);

                        // get the location of the mcentre
                        var mapCenter = map.getCenter();

                        // output the data of the centre
                        console.log('Map centre :', mapCenter.lng, mapCenter.lat);

                        // set the center as the result
                        map.setCenter(coordinates);
                    } else {
                        alert('Cna not find the place, please try again');
                    }
                })
                .catch(error => {
                    console.error('Search error:', error);
                });
        });
        
    </script>
</body>
</html>

