<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>RideLink - Boost Your Trip</title>
    <link rel="stylesheet" type="text/css" href="./frontend/css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet">
    <link rel="icon" href="./frontend/resources/images/web_logo.ico">
    <!-- DeckGL Library -->
    <script src="https://unpkg.com/deck.gl@latest/dist.min.js"></script>
    <!--MapBox 2.10.0-->
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.css" rel="stylesheet" />

</head>

<body>
    <div id="header">
        <div id="brand">
            <span>RideLink</span>
        </div>
        <div class="wrapper">
            <nav>
                <input type="radio" name="tab" id="home" checked>
                <input type="radio" name="tab" id="overview">
                <input type="radio" name="tab" id="data">
                <input type="radio" name="tab" id="findings">
                <input type="radio" name="tab" id="user">
                <label for="home" class="home" onclick=scrollToTop();>
                    <a><i class="fa fa-home" style="color: #ffffff;" aria-hidden="true"></i>Home</a>
                </label>
                <label for="overview" class="overview" onclick="scrollToElement('overview-content');">
                    <a><i class="fa-solid fa-earth-europe" style="color: #ffffff;"></i>Overview</a>
                </label>
                <label for="data" class="data" onclick="scrollToElement('data-content');">
                    <a><i class="fa fa-file-excel" style="color: #ffffff;" aria-hidden="true"></i>Data</a>
                </label>
                <label for="findings" class="findings" onclick="scrollToElement('finding-content');">
                    <a><i class="fa fa-magnifying-glass" style="color: #ffffff;" aria-hidden="true"></i>Findings</a>
                </label>
                <label for="user" class="user" onclick="scrollToElement('user-content');">
                    <a><i class="fa fa-user-group" aria-hidden="true"></i>Us</a>
                </label>
                <div class="tab"></div>
            </nav>
        </div>

        <div id="search">
            <button type="button" class="search-btn">
                <i class="fa fa-search"></i> Search
            </button>
        </div>
    </div>

    <div id="home-content" class="tab-content" style="display:block">
        <!-- <div id="time"></div>
            <script>
                const timeDiv = document.getElementById('time'); // To get element
                // Create a function to get time
                function updateTime() {
                    const now = new Date();
                    const formattedTime = now.toLocaleTimeString();
                    timeDiv.textContent = "Time: " + formattedTime;
                }
                // display time when the page is loaded for the first time
                updateTime();
                setInterval(updateTime, 1000); // update time per second
            </script> -->
        <div id="intro">
            <span>Please check out the heat map showing the distribution of pick-ups below</span>
        </div>    
        <div id='map'></div>
        <script>
            mapboxgl.accessToken = 'pk.eyJ1IjoieXV0b25nMDYyOSIsImEiOiJjbG9jM2IwNm0weWxqMmlubjB4b2V2ZWF5In0.DvGhBLaLcFQpyalSaXaYiw';
            var map = new mapboxgl.Map({
                container: 'map',
                center: [-74.0060, 40.7128],
                style: 'mapbox://styles/mapbox/dark-v11',
                zoom: 15
            });
        </script>
        </div>

        <div id="overview-content" class="tab-content" style="display:block">
            <div id="overview_left">
                <div id="overview_title_1" class="title">
                    <span>Ride smarter, not harder.</span>
                </div>
                <div id="overview_title_2" class="title">
                    <span>Reduce carbon footprint with every trip.</span>
                </div>
                <div id="overview_title_3" class="title">
                    <span>Connect better, preserve our planet."</span>
                </div>
                <div id="overview_text" class="content_text">
                    <p>
                        Our platform harnesses the power of New York's taxi data to streamline urban transportation. <br>
                        By guiding drivers and passengers to optimal locations, we cut down on idle cruising, reducing fuel use and emissions. <br>
                        Every trip moves us toward a greener city by empowering eco-friendly travel choices. Join our drive to a sustainable future. <br>
                    </p>
                </div>
            </div>
        </div>

        <div id="data-content" class="tab-content" style="display:block">
            <div id="data_left" class="left">
                <img src="./frontend/resources/images/data_fare.png" alt="data overview">
            </div>

            <div id="data_right" class="right">
                <div id="data_title" class="title">
                    <span>Data</span>
                </div>
                <div id="data_text" class="content_text">
                    <div class="data_text_inner">
                        <span>
                            The raw dataset contains  
                            <span class="emphasized-data">55 million</span> rows of data,
                        </span>
                    </div>
                    <div class="data_text_inner">
                        <span>
                            We randomly sampled 
                            <span class="emphasized-data">100000</span> rows of data from it.
                        </span>
                    </div>
                    <div class="data_text_inner">
                        <span>
                            After removing data with taxi fare <span class="emphasized-data">less than 0</span>, 
                        </span>
                    </div>
                    <div class="data_text_inner">
                        <span>
                            And deleteing data point <span class="emphasized-data">outside</span> New York City. 
                        </span>
                    </div>
                    <div class="data_text_inner">
                        <span>
                            There are 
                            <span class="emphasized-data">97,856</span> rows of valid data,
                        </span>
                    </div>
                    <div class="data_text_inner">
                        <span>
                            A validity ratio of 
                            <span class="emphasized-data">97.86%</span>.
                        </span>
                    </div>
                </div>
                <div id="rawdata">
                    <button type="button" class="rawdata-btn">
                        <i class="fa-solid fa-angle-right"></i> View Original Data Set
                    </button>
                </div>
            </div>
        </div>

        <div id="finding-content" class="tab-content" style="display:block">
            <div id="finding_left" class="left">
                <div id="finding_title" class="title">
                    <span>Findings</span>
                </div>
                <div id="finding_text" class="content_text">
                    <div class="finding_text_inner">
                        <span>
                            The 
                            <span class="emphasized-data">largest number</span>
                            of passengers take a taxi in 
                            <span class="emphasized-data">Manhattan</span>. 
                        </span>
                    </div>
                    <div class="finding_text_inner">
                        <span>
                            The 
                            <span class="emphasized-data">peak</span>
                            of passenger journeys occurs  
                            <span class="emphasized-data">between 7-8pm</span>. 
                        </span>
                    </div>
                    <div class="finding_text_inner">
                        <span>
                            The 
                            <span class="emphasized-data">lowest</span>
                            point of passenger travel occurs   
                            <span class="emphasized-data">between 4-5am</span>. 
                        </span>
                    </div>
                    <div class="finding_text_inner">
                        <span>
                            Average single journey prices are 
                            <span class="emphasized-data">lowest</span> 
                            <span class="emphasized-data">between 7-8pm</span>. 
                        </span>
                    </div>
                </div>
                <div id="readmore">
                    <button type="button" class="readmore-btn">
                        <i class="fa-solid fa-angle-right"></i> Read More
                    </button>
                </div>
            </div>

            <div id="finding_right" class="right">
                <img src="./frontend/resources/images/finding_main.png" alt="finding_main">
            </div>
        </div>


        <div id="user-content" class="tab-content" style="display:block">
            <div id="user_left" class="left">
                <img src="./frontend/resources/images/group_logo.png" alt="our group logo">
            </div>

            <div id="user_right" class="right">
                <div id="user_title" class="title">
                    <span>About Us</span>
                </div>
                <div id="user_text" class="content_text">
                    <div class="user_text_inner">
                        <span> 
                            We are group "It Just Works!".
                        </span>
                    </div>
                </div>
                <div id="readmore_us">
                    <button type="button" class="readmore-us-btn">
                        <i class="fa-solid fa-angle-right"></i> Read More
                    </button>
                </div>
            </div>
        </div>

        <script type="text/javascript">
            document.addEventListener('DOMContentLoaded', function() {
                var searchButton = document.querySelector('.rawdata-btn');
                searchButton.addEventListener('click', function() {
                    window.location.href = 'https://chriswhong.com/open-data/foil_nyc_taxi/';
                });
            });

            document.addEventListener('DOMContentLoaded', function() {
                var searchButton = document.querySelector('.readmore-btn');
                searchButton.addEventListener('click', function() {
                    window.location.href = './findings.html';
                });
            });

            document.addEventListener('DOMContentLoaded', function() {
                var searchButton = document.querySelector('.readmore-us-btn');
                searchButton.addEventListener('click', function() {
                    window.location.href = './about_us.html';
                });
            });

            document.addEventListener('DOMContentLoaded', function() {
                var searchButton = document.querySelector('.search-btn');
                searchButton.addEventListener('click', function() {
                    window.location.href = './search.html';
                });
            });

            function scrollToTop() {
                window.scrollTo({
                    top: 0,
                    left: 0,
                    behavior: 'smooth'
                });
            }

            function scrollToElement(elementId) {
                var element = document.getElementById(elementId);
                if (element) {
                    element.scrollIntoView({ behavior: 'smooth' });
                }
            }
        </script>
    </body>
</html>
<script src="./frontend/js/updateCenAndRad.js"></script>
<script src="./frontend/js/getHeatMap.js"></script>
<script type="text/javascript">
    map.on('move', function(){
        if(ifUpdate()){
            getCoords();
        }
    })
</script>